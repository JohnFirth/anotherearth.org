org.anotherearth.Container=(function(){var a;function b(){var v={};var x=org.anotherearth;var k=$("body")[0];var e=org.anotherearth.URLManager;var l={};var A={};var n={};var d={};d.latLng=e.getURLQueryStringValue("isLatLngLocked");d.alt=e.getURLQueryStringValue("isAltLocked");d.tilt=e.getURLQueryStringValue("isTiltLocked");d.heading=e.getURLQueryStringValue("isHeadingLocked");for(var r in d){n[r]=((d[r]!==null)?parseInt(d[r],10):1)}l.lat=parseFloat(e.getURLQueryStringValue("LLat"))||org.anotherearth.DEFAULT_L_EARTH_COORDS.LAT;l.lng=parseFloat(e.getURLQueryStringValue("LLng"))||org.anotherearth.DEFAULT_L_EARTH_COORDS.LNG;l.alt=parseFloat(e.getURLQueryStringValue("LAlt"))||org.anotherearth.DEFAULT_L_EARTH_COORDS.ALT;l.tilt=parseFloat(e.getURLQueryStringValue("LTilt"))||org.anotherearth.DEFAULT_L_EARTH_COORDS.TILT;l.head=parseFloat(e.getURLQueryStringValue("LHead"))||org.anotherearth.DEFAULT_L_EARTH_COORDS.HEAD;A.lat=parseFloat(e.getURLQueryStringValue("RLat"))||org.anotherearth.DEFAULT_R_EARTH_COORDS.LAT;A.lng=parseFloat(e.getURLQueryStringValue("RLng"))||org.anotherearth.DEFAULT_R_EARTH_COORDS.LNG;A.alt=parseFloat(e.getURLQueryStringValue("RAlt"))||org.anotherearth.DEFAULT_R_EARTH_COORDS.ALT;A.tilt=parseFloat(e.getURLQueryStringValue("RTilt"))||org.anotherearth.DEFAULT_R_EARTH_COORDS.TILT;A.head=parseFloat(e.getURLQueryStringValue("RHead"))||org.anotherearth.DEFAULT_R_EARTH_COORDS.HEAD;v.welcomePanel=new x.Panel(org.anotherearth.WELCOME_PANEL_BODY_ID,org.anotherearth.WELCOME_PANEL_HEADER_ID,org.anotherearth.WELCOME_PANEL_ID,"Welcome to anotherearth.org",k,true,true,true);var t=document.createElement("div");t.innerHTML="<p>This application gives you a number of tools with which you can easily and comprehensively compare two views of the Earth, using the Google Earth browser plugin. These include the ability to synchronize the movement of two Earths, select layers such as buildings, roads and borders for the Earths, jump to locations of your choice, undo/redo any movements, and create links to your views.</p><p>Please see the <a href=\"Pakistan_floods/index.html\">sub-site dedicated to the recent flooding in Pakistan</a>.</p><p>Please refer to Google's documentation for guides to Google Earth and its navigation control.</p><p>If your browser's preferred language isn't English then using a translator, <span id=\"google_branding\"></span>, I've attempted to convert the text.</p><p>I hope you find the application useful! Feel free to contact me by email: contact(at)anotherearth(dot)org</p>";if(!$.support.leadingWhitespace){t.innerHTML+="<p>For a significantly enhanced experience with this site, I recommend using the Firefox or Chrome browsers.</p>"}v.welcomePanel.addChild(new org.anotherearth.MiscellaneousElement(t));google.language.getBranding("google_branding");v.earthsManager=new x.EarthsManager();v.earthsController=new x.EarthsController(v.earthsManager,n);v.leftEarth=new org.anotherearth.LockableEarth(org.anotherearth.L_EARTH_ID,v.earthsController,l);v.rightEarth=new org.anotherearth.LockableEarth(org.anotherearth.R_EARTH_ID,v.earthsController,A);v.controlPanel=new x.ControlPanel(org.anotherearth.CP_BUTTONS_CONTAINER_ID,org.anotherearth.CP_HEADER_ID,org.anotherearth.CP_ID,"Control Panel",k,true,true,false);v.earthsController.setLeftEarth(v.leftEarth);v.earthsController.setRightEarth(v.rightEarth);v.earthsController.setControlPanel(v.controlPanel);v.earthsManager.registerNewEarthObserver(v.controlPanel);v.earthsManager.registerUndoRedoObserver(v.controlPanel);v.earthsManager.registerUndoRedoObserver(v.earthsController);v.linkCreatorCommand=new x.LinkCreatorCommand(v.earthsController);v.toggleVerticalMovementLockCommand=new x.ToggleMovementLockCommand("vertical",v.earthsController);v.toggleHorizontalMovementLockCommand=new x.ToggleMovementLockCommand("horizontal",v.earthsController);v.toggleTiltLockCommand=new x.ToggleMovementLockCommand("tilt",v.earthsController);v.toggleHeadingLockCommand=new x.ToggleMovementLockCommand("head",v.earthsController);v.undoCommand=new x.UndoCommand(v.earthsController);v.redoCommand=new x.RedoCommand(v.earthsController);v.equateCameraAltitudesCommand=new x.EquateCameraAltitudesCommand(v.earthsController);v.equateCameraLatsLngsCommand=new x.EquateCameraLatsLngsCommand(v.earthsController);v.equateCameraTiltsCommand=new x.EquateCameraTiltsCommand(v.earthsController);v.equateCameraHeadingsCommand=new x.EquateCameraHeadingsCommand(v.earthsController);v.toggleEarthExtraCommand=new x.ToggleEarthExtraCommand(v.earthsController);v.toggleDonorEarthCommand=new x.ToggleDonorEarthCommand(v.earthsController);v.linkCreatingButtonUpdateStrategy=new x.LinkCreatingButtonUpdateStrategy();v.undoButtonUpdateStrategy=new x.UndoButtonUpdateStrategy();v.redoButtonUpdateStrategy=new x.RedoButtonUpdateStrategy();v.equateCameraLatsLngsStrategy=new x.EquateLatLngsButtonStrategy();v.equateCameraAltitudesStrategy=new x.EquateAltitudesButtonStrategy();v.equateCameraTiltsStrategy=new x.EquateTiltsButtonStrategy();v.equateCameraHeadingsStrategy=new x.EquateHeadingsButtonStrategy();v.altLockingCheckbox=new x.TwoEarthsCheckbox("altitudes",org.anotherearth.CP_ALTITUDE_LOCK_CHECKBOX_ID,v.earthsManager);v.latLngLockingCheckbox=new x.TwoEarthsCheckbox("latitudes and longitudes",org.anotherearth.CP_VIEW_CENTER_LOCK_CHECKBOX_ID,v.earthsManager);v.tiltLockingCheckbox=new x.TwoEarthsCheckbox("tilts",org.anotherearth.CP_TILT_LOCK_CHECKBOX_ID,v.earthsManager);v.headingLockingCheckbox=new x.TwoEarthsCheckbox("headings",org.anotherearth.CP_HEAD_LOCK_CHECKBOX_ID,v.earthsManager);v.altLockingCheckbox.addClickEventListener(v.toggleVerticalMovementLockCommand);v.latLngLockingCheckbox.addClickEventListener(v.toggleHorizontalMovementLockCommand);v.tiltLockingCheckbox.addClickEventListener(v.toggleTiltLockCommand);v.headingLockingCheckbox.addClickEventListener(v.toggleHeadingLockCommand);v.undoButton=new x.TwoEarthsButton("undo",org.anotherearth.CP_UNDO_BUTTON_ID,v.earthsManager);v.undoButton.addClickEventListener(v.undoCommand);v.undoButton.setUndoRedoUpdateStrategy(v.undoButtonUpdateStrategy);v.undoButton.setNewEarthPropsUpdateStrategy(v.undoButtonUpdateStrategy);v.undoButton.setIsEnabled(false);v.redoButton=new x.TwoEarthsButton("redo",org.anotherearth.CP_REDO_BUTTON_ID,v.earthsManager);v.redoButton.addClickEventListener(v.redoCommand);v.redoButton.setUndoRedoUpdateStrategy(v.redoButtonUpdateStrategy);v.redoButton.setNewEarthPropsUpdateStrategy(v.redoButtonUpdateStrategy);v.redoButton.setIsEnabled(false);v.equateCameraLatsLngsButton=new x.TwoEarthsButton("latitude and longitude",org.anotherearth.EQUATE_CAM_LATS_LNGS_BUTTON_ID,v.earthsManager);v.equateCameraLatsLngsButton.addClickEventListener(v.equateCameraLatsLngsCommand);v.equateCameraLatsLngsButton.setUndoRedoUpdateStrategy(v.equateCameraLatsLngsStrategy);v.equateCameraLatsLngsButton.setNewEarthPropsUpdateStrategy(v.equateCameraLatsLngsStrategy);v.equateCameraAltitudesButton=new x.TwoEarthsButton("altitude",org.anotherearth.EQUATE_CAM_ALTITUDES_BUTTON_ID,v.earthsManager);v.equateCameraAltitudesButton.addClickEventListener(v.equateCameraAltitudesCommand);v.equateCameraAltitudesButton.setUndoRedoUpdateStrategy(v.equateCameraAltitudesStrategy);v.equateCameraAltitudesButton.setNewEarthPropsUpdateStrategy(v.equateCameraAltitudesStrategy);v.equateCameraTiltsButton=new x.TwoEarthsButton("tilt",org.anotherearth.EQUATE_CAM_TILTS_BUTTON_ID,v.earthsManager);v.equateCameraTiltsButton.addClickEventListener(v.equateCameraTiltsCommand);v.equateCameraTiltsButton.setUndoRedoUpdateStrategy(v.equateCameraTiltsStrategy);v.equateCameraTiltsButton.setNewEarthPropsUpdateStrategy(v.equateCameraTiltsStrategy);v.equateCameraHeadingsButton=new x.TwoEarthsButton("heading",org.anotherearth.EQUATE_CAM_HEADINGS_BUTTON_ID,v.earthsManager);v.equateCameraHeadingsButton.addClickEventListener(v.equateCameraHeadingsCommand);v.equateCameraHeadingsButton.setUndoRedoUpdateStrategy(v.equateCameraHeadingsStrategy);v.equateCameraHeadingsButton.setNewEarthPropsUpdateStrategy(v.equateCameraHeadingsStrategy);v.linkCreatorButton=new x.LinkCreatorButton("create link",org.anotherearth.CP_LINK_CREATOR_BUTTON_ID,org.anotherearth.CP_LINK_BOX_ID,v.earthsManager);v.linkCreatorButton.setUndoRedoUpdateStrategy(v.linkCreatingButtonUpdateStrategy);v.linkCreatorButton.setNewEarthPropsUpdateStrategy(v.linkCreatingButtonUpdateStrategy);v.linkCreatorButton.setIsEnabled(true);v.linkCreatorButton.addClickEventListener(v.linkCreatorCommand);v.earthsController.setLinkCreatorButton(v.linkCreatorButton);var g=[];var c={};var q={};c.id="pick_left_camera";c.value="left_earth";c.name="donor_camera_selector";c.label="from left camera";g.push(c);q.id="pick_right_camera";q.value="right_earth";q.name="donor_camera_selector";q.label="from right camera";g.push(q);v.donorRadioButtons=new x.RadioButtons(g,"donor_camera_selector");v.donorRadioButtons.addClickEventListener(v.toggleDonorEarthCommand);var j={};var B={};var h={};var z={};var y={};var p={};var m={};var s={};j.text="borders and towns";j.value="borders";B.text="hi-res buildings";B.value="hiRes";h.text="lo-res buildings";h.value="loRes";z.text="roads";z.value="roads";y.text="terrain";y.value="terrain";p.text="sun";p.value="sun";m.text="atmosphere";m.value="atmosphere";s.text="grid";s.value="grid";var w=[j,B,h,z,y,s];var i=[$.extend(true,{},j),$.extend(true,{},B),$.extend(true,{},h),$.extend(true,{},z),$.extend(true,{},y),$.extend(true,{},s)];v.LEarthOptionSelector=new x.SelectBox(w,1,"left Earth",org.anotherearth.CP_L_EARTH_EXTRAS_SELECTOR_ID,true);v.REarthOptionSelector=new x.SelectBox(i,1,"right Earth",org.anotherearth.CP_R_EARTH_EXTRAS_SELECTOR_ID,true);v.LEarthOptionSelector.addClickEventListener(v.toggleEarthExtraCommand);v.REarthOptionSelector.addClickEventListener(v.toggleEarthExtraCommand);v.leftEarthSearch=new org.anotherearth.SearchBox(v.leftEarth,v.earthsController,org.anotherearth.L_EARTH_SEARCH_BOX_ID,"left Earth");v.rightEarthSearch=new org.anotherearth.SearchBox(v.rightEarth,v.earthsController,org.anotherearth.R_EARTH_SEARCH_BOX_ID,"right Earth");v.checkBoxSubPanel=new x.ShrinkableSubPanel("synchronize camera movement",org.anotherearth.CP_CAMERA_PROPERTY_LOCKING_SUB_PANEL_ID);v.cameraPropCopyingSubPanel=new x.ShrinkableSubPanel("copy camera coordinates",org.anotherearth.CP_CAMERA_PROPERTY_COPYING_SUB_PANEL_ID);v.earthOptionsSubPanel=new x.ShrinkableSubPanel("Earth overlays",org.anotherearth.CP_EARTH_OPTIONS_SUB_PANEL_ID);v.searchBoxSubPanel=new x.ShrinkableSubPanel("search",org.anotherearth.CP_SEARCH_BOX_SUB_PANEL_ID);var o=document.createElement("span");o.id="google_search_branding";$(v.searchBoxSubPanel.getContainingElement()).find(".sub_panel_title").append(o);v.miscellaneousSubPanel=new x.ShrinkableSubPanel("undo/redo and create link",org.anotherearth.CP_MISC_OPTIONS_SUB_PANEL_ID);var u=(function(){var C=0;return function(){return ++C}})();var f=function(){if(u()===2){v.altLockingCheckbox.setIsChecked(n.alt);v.tiltLockingCheckbox.setIsChecked(n.tilt);v.latLngLockingCheckbox.setIsChecked(n.latLng);v.headingLockingCheckbox.setIsChecked(n.heading);v.donorRadioButtons.setIsChecked(true,v.donorRadioButtons.getIndexOf("left_camera"));v.controlPanel.performNewEarthPropsUpdate();v.controlPanel.show();$("#"+org.anotherearth.CP_ID+" button").width($("#"+org.anotherearth.CP_ID+" button").width());$("#"+org.anotherearth.CP_ID).width($("#"+org.anotherearth.CP_ID).width());var C=window.innerHeight?window.innerHeight:$(window).height();var D=v.controlPanel.getContainingElement();var E=parseInt(($(D).css("top")).replace(/(\d+)px/,"$1"),10);if(C<=(($(v.controlPanel.getContainingElement()).outerHeight())+E)){v.controlPanel.closeSubPanels()}}};v.earthsController.setEarthLoadingResponseCallback(f);v.checkBoxSubPanel.addChild(v.altLockingCheckbox);v.checkBoxSubPanel.addChild(v.headingLockingCheckbox);v.checkBoxSubPanel.addChild(v.latLngLockingCheckbox);v.checkBoxSubPanel.addChild(v.tiltLockingCheckbox);v.cameraPropCopyingSubPanel.addChild(v.donorRadioButtons);v.cameraPropCopyingSubPanel.addChild(v.equateCameraAltitudesButton);v.cameraPropCopyingSubPanel.addChild(v.equateCameraHeadingsButton);v.cameraPropCopyingSubPanel.addChild(v.equateCameraLatsLngsButton);v.cameraPropCopyingSubPanel.addChild(v.equateCameraTiltsButton);v.earthOptionsSubPanel.addChild(v.LEarthOptionSelector);v.earthOptionsSubPanel.addChild(v.REarthOptionSelector);v.miscellaneousSubPanel.addChild(v.undoButton);v.miscellaneousSubPanel.addChild(v.redoButton);v.miscellaneousSubPanel.addChild(v.linkCreatorButton);v.searchBoxSubPanel.addChild(v.leftEarthSearch);v.searchBoxSubPanel.addChild(v.rightEarthSearch);v.controlPanel.addChild(v.earthOptionsSubPanel);v.controlPanel.addChild(v.searchBoxSubPanel);v.controlPanel.addChild(v.checkBoxSubPanel);v.controlPanel.addChild(v.cameraPropCopyingSubPanel);v.controlPanel.addChild(v.miscellaneousSubPanel);google.language.getBranding("google_search_branding");$(".gBrandingText").css("vertical-align","text-bottom");return{getComponent:function(C){return v[C]}}}return{getInstance:function(){if(!a){a=b()}return a}}})();